<!--begin::Toolbar-->
<div class="toolbar" id="kt_toolbar">
  <div class="container-fluid d-flex flex-stack flex-wrap flex-sm-nowrap">
    <!--begin::Info-->
    <div class="d-flex flex-column align-items-start justify-content-center flex-wrap me-2">
      <!--begin::Title-->
      <h1 class="text-dark fw-bolder my-1 fs-2">Dashboard 
      <small class="text-muted fs-6 fw-normal ms-1"></small></h1>
      <!--end::Title-->
      <!--begin::Breadcrumb-->
      <ul class="breadcrumb fw-bold fs-base my-1">
        <li class="breadcrumb-item text-muted">Home
          <!--<a href="/craft/index.html" class="text-muted text-hover-primary">Home</a>-->
        </li>
        <li class="breadcrumb-item text-dark">Dashboard</li>
      </ul>
      <!--end::Breadcrumb-->
    </div>
    <!--end::Info-->
  </div>
</div>
<!--end::Toolbar-->
<!--begin::Post-->
<div class="post fs-6 d-flex flex-column-fluid" id="kt_post">
  <!--begin::Container-->
  <div class="container-xxl">
    <div id="map"></div>
  </div>
  <!--end::Container-->
</div>
<!--end::Post-->
<script>
  var map = L.map("map").setView([51.505, -0.09], 13);

  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
    attribution:
      '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
  }).addTo(map);

  var markers = [];
  <% @locations.each do |l| %>
    var marker = L.marker([<%= l.latitude %>, <%= l.longitude %>]).addTo(map)
      .bindPopup('<a href="<%= location_path(l) %>"><%= l.name %></a><br />Latest Download: <%= l.latest_download %> mbps<br />Latest Upload: <%= l.latest_upload %> mbps');
    markers.push(marker);
  <% end %>

  var group = new L.featureGroup(markers);
  map.fitBounds(group.getBounds());

</script>

<div class="card" style="width: 100%; height: max-content; margin-bottom: 25px">
  <div class="card-header d-flex align-items-center" style="height: 65px">
    <div class="card-title fw-bolder" style="font-size: 20px; color: #3f4254">
      Data Usage
    </div>
  </div>
  <div class="card-body pt-0 d-flex flex-row justify-content-start align-items-start">
    <div style="margin-top: 30px; width: 60%">
      <div class="location-data--row mb-6 d-flex flex-row align-items-center justify-content-between flex-wrap">
        <div class="fw-bolder w-50" style="min-width: 130px">Avg. Data Usage</div>
        <div class="fw-bold d-flex flex-row w-100 w-xl-50" style="color: #5e6278; font-size: 14px; <%= client.data_cap_max_usage.nil? ? "color: #b5b5c3;" : "" %>">
          <%= client.data_cap_max_usage.nil? ? "Disabled" : client.get_measurement_data(total_avg) %>
        </div>
      </div>
      <div class="location-data--row mb-6 d-flex flex-row align-items-center justify-content-between flex-wrap">
        <div class="fw-bolder w-50" style="min-width: 130px">Data Cap</div>
        <div class="fw-bold d-flex flex-row w-100 w-xl-50" style="color: #5e6278; font-size: 14px; <%= client.data_cap_max_usage.nil? ? "color: #b5b5c3;" : "" %>">
          <%= client.data_cap_max_usage.nil? ? "Disabled" : "#{(client.data_cap_max_usage / (1024**2)).round(0)} MB per #{client.get_periodicity_period}" %>
        </div>
      </div>
      <div class="location-data--row mb-6 d-flex flex-row align-items-center justify-content-between flex-wrap">
        <div class="fw-bolder w-50" style="min-width: 130px"><%= client.data_cap_periodicity.capitalize() %> Usage</div>
        <div class="fw-bold d-flex flex-row w-100 w-xl-50" style="color: #5e6278; font-size: 14px;">
          <% if client.data_cap_max_usage.nil?%>
            <%= client.data_cap_current_period_usage.nil? ? "N/A" : "#{(client.data_cap_current_period_usage / (1024**2)).round(0)} MB" %>
          <% else %>
            <div class="d-flex flex-row align-items-center justify-content-center">
              <div class="w-100px h-5px d-flex justify-content-start align-items-center" style="border-radius: 6.5px; background-color: <%= client.get_data_cap_percentage_usage >= 80 ? "#fff3f6" : "#e7f6ff" %>">
                <div class="h-5px" style="width: <%= "#{client.get_data_cap_percentage_usage}%" %>; background-color: <%= client.get_data_cap_percentage_usage >= 80 ? "#f1416c" : "#00a3ff" %>; border-radius: 5px"></div>
              </div>
              <p class="ms-3 mt-0 mb-0 me-0"><%= "#{(client.data_cap_current_period_usage / (1024**2)).round(0)} MB (#{client.get_data_cap_percentage_usage}% used)" %></p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <div class="d-flex justify-content-end align-items-start" style="width: 40%; margin-top: 30px;">
      <button type="button"
              class="btn btn-primary"
              data-bs-target="#manage_pod_data_cap_modal"
              data-bs-toggle="modal"
      >Manage Data Cap</button>
    </div>
  </div>
</div>
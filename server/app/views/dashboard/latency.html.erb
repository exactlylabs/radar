<% responsive = @responsive || false %>

<%= turbo_frame_tag "latency-widget#{responsive ? '-responsive' : ''}" do %>
  <% if @latencies.count == 0 %>
    <%= render partial: "dashboard/components/widgets/no_data" %>
  <% else %>
    <canvas id="latency-chart<%= responsive ? '-responsive' : ''%>"
            data-controller="multi-line-chart"
            data-line-chart-data="<%= @latencies.to_json %>"
            data-parent-id="latency-widget<%= responsive ? '-responsive' : ''%>"
            data-y-step-size="1"
            data-label-suffix=" s"
            data-action="toggleLine@window->multi-line-chart#toggleLine"
            data-chart-id="latency"
            data-full-width="true"
    ></canvas>
    <%= render partial: "dashboard/components/widgets/multi_line_line_toggler",
               locals: {
                 chart_id: "latency",
                 options: [
                   { label: 'Minimum', hex: '#FF695D' },
                   { label: 'Median', hex: '#4B7BE5' },
                   { label: 'Maximum', hex: '#9138E5' }
                 ]
               } %>
  <% end %>
<% end %>